{# {% extends 'base.html.twig' %} #}
{% block content %}
    <div class=" containercontainer-fluid mt-5 mb-5">
        <div class="row">
            <div class="col-12 btn-toolbar text-center">
                <div id="chartdiv" class="justify-content-center" ></div>
                <script>
                    window.addEventListener('DOMContentLoaded', (event) => {
                        am4core.ready(function () {
                            var chart = am4core.create("chartdiv", am4plugins_wordCloud.WordCloud);
                            am4core.Align='center';
                            {# @TODO FIX THEMES BUNDLING #}
                            {#//am4core.useTheme(am4themes_animated);#}
                            {#//am4core.useTheme(am4themes_moonrisekingdom);#}
                            chart.fontFamily = "Courier New";
                            var series = chart.series.push(new am4plugins_wordCloud.WordCloudSeries());
                            series.randomness = 0.1;
                            series.rotationThreshold = 0.5;

                            series.data = [
                                {% for Tag in topTags %}
                                {
                                    'tag': '{{ Tag.word }}',
                                    'count': '{{ Tag.cnt }}'
                                },
                                {% endfor %}
                            ];


                            series.dataFields.word = "tag";
                            series.dataFields.value = "count";

                            series.heatRules.push({
                                "target": series.labels.template,
                                "property": "fill",
                                "min": am4core.color("#0a5cde"),
                                "max": am4core.color("#33b5fd"),
                                "dataField": "value"
                            });

                            series.labels.template.url = "/search?q={word}";
                            series.labels.template.urlTarget = "_blank";
                            series.labels.template.tooltipText = "{word}: {value}";

                            var hoverState = series.labels.template.states.create("hover");
                            hoverState.properties.fill = am4core.color("#21e568");

                        });
                    });
                </script>
            </div>
        </div>
    </div>
    <!--<a href="/search?q= Tag.word }}" class="btn btn-outline-primary btn-sm m-1">
                            <span> Tag.word }}
                                <sup> Tag.cnt }}</sup>
                            </span>
                        </a>-->
{% endblock %}
